<!DOCTYPE html> <html lang="de"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> From Datamining to a Raceplan | Gerrit Bickendorf </title> <meta name="author" content="Gerrit Bickendorf"> <meta name="description" content="How to become faster at rowing with Python"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%A4%96&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://gbickendorf.github.io/projects/elfsteden/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Gerrit</span> Bickendorf </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">From Datamining to a Raceplan</h1> <p class="post-description">How to become faster at rowing with Python</p> </header> <article> <h2 id="synopsis">Synopsis</h2> <p>Here I present my project that uses public GPS data points of a rowing regatta. The dataset can be used to extract useful positions and spots along the track from the winning team.</p> <h2 id="the-event">The Event</h2> <p>The event we will be talking about is the <a href="https://elfstedenroeimarathon.nl/en/" rel="external nofollow noopener" target="_blank">elfsteden roeimarathon</a> in the northern parts of the Netherlands. Once upon a time, when the canals that are found everywhere in the Netherlands still froze over in the winter, there was a ice skating event. The race span almost 200 km and went though eleven cities, hence the name. Nowadays that the canals do not freeze anymore, the event takes other shapes such as a bicycle race and a rowing regatta. The latter is the event we will analyze here.</p> <div class="row justify-content-sm-center"> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/elfsteden-480.webp 480w,/assets/img/elfsteden-800.webp 800w,/assets/img/elfsteden-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/elfsteden.jpeg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="example image" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>The course is around 210 km long and the majority of teams are expected to take between 16 and 20 hours to arrive at the finish line. The only boat-class that is allowed to start is the coxed double, i.e. two rowers and one cox. The three team sizes are either just the three, six or up to twelve rowers. The six and twelve rowers teams follow their team boat by car, waiting to swap the athletes at fixed points. Each team finds suitable points along the route to swap athletes either by analyzing satellite images or by asking around. Not every team gives up its best swapping points willingly, as congestion would significantly slow down the swap.</p> <h2 id="getting-the-data">Getting the Data</h2> <p>During the race all boats carry a GPS tracker that transmits the position in realtime, such that the complete race can be followed by the <a href="https://tourmonitor.eu/elfstedenroeimarathon/esrm2023/" rel="external nofollow noopener" target="_blank">tour-monitor</a> website. As the race progresses, the website takes continuously longer to load and render. As any reasonable data scientist would do, I checked the source code. It turns out, it loads numerous large files, indicating that rendering of the course is done completely on the client site. The majority of the files contain thousands of entries like</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{"id":"552957","d_id":"1413","t":"1684555152000","lat":"52.881303","lng":"5.498525","s":"3.28"}
</code></pre></div></div> <p>This json format can easily be read by a simple python script, making datamining a breeze. Thankfully the software engineer that set this whole thing up did not obfuscate anything. “lat” and “lng” does look an awful lot like latitude and longitude in degrees which also fits the location of the race. The next step is to make sense of the other fields. “s” might be the current speed in m/s but we will ignore that. “t” looks like the time given in the unix epoch. Converting this to human time: Yes we are golden. The date and time is precisely during the race. The last two fields “id” and “d_id” are yet to be uncovered. As the former is only found once in each file, this is most likely the id of the GPS point, therefore irrelevant for us. The latter is found repeatedly, hinting that this might be unique to each team. In fact, the very first data file the website pulls contains fields like</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{"id":"1536","ca_id":"1304","nm":"Speedy BONNzales","b_nm":"","c_nm":"","stp":"6","q":"0"}
</code></pre></div></div> <p>“nm” is definitely our team name, but the “id” 1536 does not appear in the GPS files. Luckily there is another json field “device” that looks like</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{"id":"1413","tm_id":"1536","nm":"WW-006 (2021) (juliet)","mo":"","so":""}
</code></pre></div></div> <p>In other words: our team carries the device with id 1413. This id is also found by the thousands in the GPS files. Let’s group all GPS points belonging to a single id. Now that we understand the data, let’s see what it contains!</p> <h2 id="first-sanity-checks">First sanity checks</h2> <p>The first thing to check is the latitude and longitude. Let’s plot the values of our team:</p> <div class="row justify-content-sm-center"> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/course-480.webp 480w,/assets/img/course-800.webp 800w,/assets/img/course-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/course.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="example image" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>That is exactly what the course looks like, although slightly distorted due to weird scaling. The course starts roughly at (53.2 , 5.8), traversing the small upper circle clockwise, to and from Dokkum at the top right, followed by the large circle and finishing a few kilometers from the start.</p> <h2 id="extracting-speed">Extracting Speed</h2> <p>Using some trigonometry and the radius of the Earth allows to convert the angular coordinates to meters. The distance between two GPS signals combined with the timestamps allows to calculate the instantaneous speed. Lastly, converting the epoch to human time allows to compare the events to what we have experiences. Let’s plot this!</p> <div class="row justify-content-sm-center"> <div class="col-sm-12 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/speed-480.webp 480w,/assets/img/speed-800.webp 800w,/assets/img/speed-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/speed.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="example image" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>So, what are the features we are seeing now? Clearly, the peaks of 18 km/h are noise. This happens when the GPS-signal is weak and suddenly jumps. Secondly, you can observe fatigue each single crew. For example at 22:00 a friend and me had our turn in the boat. Even though we were the fastest crew overall, you can clearly observe that we slow down until the next change at ~23:00. One hour of fast rowing tires you out!</p> <p>Also, at the start of our turn there is a lot of noise, both upward and downward. The reason is quite beautiful in person: neat little bridges that we went under. Here the GPS tracker lost contact to the satellites and gave bad readings.</p> <h2 id="spying-on-the-others">Spying on the others</h2> <p>The most interesting part of the data are the real dips in the speed. For what reason do you have to come to a complete stop? Right, changing the crew!</p> <p>This is very useful! Let us see where the fastest team of that year changed. Maybe there are some good spots for us to use. As an example, let’s pick the dip in speed at 4:50 in the morning. The coordinates can be found by some more python manipulation to be (52.873161,5.540571). Let’s see where this is on the <a href="https://www.openstreetmap.org/?mlat=52.87307&amp;mlon=5.54054#map=18/52.87307/5.54054" rel="external nofollow noopener" target="_blank">OpenStreetMap</a>.</p> <div class="row justify-content-sm-center"> <div class="col-sm-8 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/map-480.webp 480w,/assets/img/map-800.webp 800w,/assets/img/map-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/map.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="example image" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>Clearly, the team changes right besides the bridge, easily reached by the team car. This was not a spot we were aware of.</p> <h2 id="future-plans">Future plans</h2> <p>Certainly, the next time we start at this regatta, we will have a lot more spots at our disposal. One could even assign a congestion risk to each spot, by counting teams that seem to change at each respective spot. Another possibility to use the data would be to check which spots are easy to use. Sometimes changing spots are hard to reach, overgrown or at weird angles. All these make the change take longer. Conversely, if the dip in speed is narrow and only encompasses few GPS-pings it seems to be a very practical place to change.</p> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Gerrit Bickendorf. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?601a2d3465e2a52bec38b600518d5f70"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"about",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-publications",title:"publications",description:"",section:"Navigation",handler:()=>{window.location.href="/publications/"}},{id:"nav-projects",title:"projects",description:"Science and fun projects",section:"Navigation",handler:()=>{window.location.href="/projects/"}},{id:"nav-repositories",title:"repositories",description:"Here you can find my public repositories.",section:"Navigation",handler:()=>{window.location.href="/repositories/"}},{id:"nav-cv",title:"cv",description:"",section:"Navigation",handler:()=>{window.location.href="/cv/"}},{id:"projects-learning-the-density-of-physics",title:"Learning the Density of Physics",description:"An easy introduction to resonant anomaly detection",section:"Projects",handler:()=>{window.location.href="/projects/cathode/"}},{id:"projects-from-datamining-to-a-raceplan",title:"From Datamining to a Raceplan",description:"How to become faster at rowing with Python",section:"Projects",handler:()=>{window.location.href="/projects/elfsteden/"}},{id:"projects-raspberry-pi-geiger-counter",title:"Raspberry Pi Geiger Counter",description:"Combining a Raspberry Pi with a cheap self-soldered Geiger counter",section:"Projects",handler:()=>{window.location.href="/projects/radiation/"}},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%62%69%63%6B%65%6E%64%6F%72%66@%75%6E%69-%62%6F%6E%6E.%64%65","_blank")}},{id:"socials-google-scholar",title:"Google Scholar",section:"Socials",handler:()=>{window.open("https://scholar.google.com/citations?user=qc6CJjYAAAAJ","_blank")}},{id:"socials-linkedin",title:"LinkedIn",section:"Socials",handler:()=>{window.open("https://www.linkedin.com/in/gerrit-bickendorf# your LinkedIn user name","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>